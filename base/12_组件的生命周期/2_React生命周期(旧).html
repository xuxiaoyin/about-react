<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
  <div id="test"></div>

  <script src="../js/react.js"></script>
  <script src="../js/react-dom.js"></script>
  <script src="../js/babel.min.js"></script>

 <script type="text/babel">
   /**
    * 1.初始化阶段：由ReactDom.render()触发---初次渲染
    *     1.constructor()
    *     2.componentWillMount()
    *     3.render()
    *     4.componentDidMount()
    * 2.更新阶段：由组件内部this.setState()或父组件重新render触发
    *     1.shouldComponentUpdate()
    *     2.componentWillMount()
    *     3.render()
    *     4.componentDidUpdate()
    * 3.卸载组件：由ReactDOM.unmountComponentAtNode()触发
    *     1.componentWillUnmount()
    */
   class Count extends React.Component{
     constructor() {
       console.log('constructor')
       super()
       this.state = { count: 0 }
     }

     // 加法回调函数
     add = () => {
       const { count } = this.state
       this.setState({count: count+1})
     }

     death = () => {
       ReactDOM.unmountComponentAtNode(document.getElementById('test'))
     }

     // 强制更新
     mustUpdate = () => {
       this.forceUpdate()
     }

     // 组件将要挂载
     componentWillMount() {
       console.log('componentWillMount')
     }

     // 组件挂载完毕
     componentDidMount() {
       console.log('componentDidMount')
     }

     // 组件将要卸载
     componentWillUnmount() {
       console.log('componentWillUnmount')
     }

     // 控制组件是否更新（该钩子可以进行组件的优化）
     shouldComponentUpdate() {
       console.log('shouldComponentUpdate')
       return true
     }

     // 组件将要更新
     componentWillUpdate() {
       console.log('componentWillUpdate')
     }

     // 组件更新完毕
     componentDidUpdate() {
       console.log('componentDidUpdate')
     }

     render() {
       console.log('render')
      return (
          <div>
            <h1>当前求和：{this.state.count}</h1>
            <button onClick={this.add}>点我+1</button>
            <button onClick={this.death}>点我卸载组件</button>
            <button onClick={this.mustUpdate}>不加不减，就是强制掉一下render</button>
          </div>
      )
     }
   }

   ReactDOM.render(<Count/>, document.getElementById('test'))
 </script>
</body>
</html>
